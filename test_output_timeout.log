============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0 -- /usr/bin/python
cachedir: .pytest_cache
rootdir: /home/francoisosmozis/hippique-orchestrator
configfile: pytest.ini (WARNING: ignoring pytest config in setup.cfg!)
testpaths: tests
plugins: anyio-3.7.1, env-1.2.0, cov-7.0.0, mock-3.14.0, timeout-2.4.0, xdist-3.8.0, asyncio-0.23.7
timeout: 60.0s
timeout method: signal
timeout func_only: False
asyncio: mode=Mode.AUTO
collecting ... 
----------------------------- live log collection ------------------------------
2025-12-04 20:34:39 [INFO] Loading configuration...
2025-12-04 20:34:39 [INFO] Configuration loaded: PROJECT_ID=test-project, GCS_BUCKET=None, MODE=tasks
2025-12-04 20:34:51 [WARNING] One or more core modules not found. Using mock implementations.
collected 221 items

tests/test_analysis_utils.py::test_normalise_text[None-] 
-------------------------------- live log setup --------------------------------
2025-12-04 20:34:53 [INFO] Loading configuration...
2025-12-04 20:34:53 [INFO] Configuration loaded: PROJECT_ID=test-project, GCS_BUCKET=test-bucket, MODE=tasks
PASSED                                                                   [  0%]
tests/test_analysis_utils.py::test_normalise_text[  \xc9curie Sp\xe9ciale  -ecurie speciale] PASSED [  0%]
tests/test_analysis_utils.py::test_normalise_text[  -] PASSED            [  1%]
tests/test_analysis_utils.py::test_normalise_text[TROT-trot] PASSED      [  1%]
tests/test_analysis_utils.py::test_normalise_text[handicap-handicap] PASSED [  2%]
tests/test_analysis_utils.py::test_coerce_partants[14-14] PASSED         [  2%]
tests/test_analysis_utils.py::test_coerce_partants[14.0-14] PASSED       [  3%]
tests/test_analysis_utils.py::test_coerce_partants[14 partants-14] PASSED [  3%]
tests/test_analysis_utils.py::test_coerce_partants[environ 14-14] PASSED [  4%]
tests/test_analysis_utils.py::test_coerce_partants[None-None] PASSED     [  4%]
tests/test_analysis_utils.py::test_coerce_partants[True-None] PASSED     [  4%]
tests/test_analysis_utils.py::test_coerce_partants[N/A-None] PASSED      [  5%]
tests/test_analysis_utils.py::test_coerce_partants[-5-None] PASSED       [  5%]
tests/test_analysis_utils.py::test_compute_overround_cap_default PASSED  [  6%]
tests/test_analysis_utils.py::test_compute_overround_cap_flat_handicap_large_field PASSED [  6%]
tests/test_analysis_utils.py::test_compute_overround_cap_flat_large_field_from_label PASSED [  7%]
tests/test_analysis_utils.py::test_compute_overround_cap_small_field_uses_default PASSED [  7%]
tests/test_analysis_utils.py::test_compute_overround_cap_updates_context PASSED [  8%]
tests/test_api_endpoints.py::test_healthz_endpoint 
-------------------------------- live log call ---------------------------------
2025-12-04 20:34:53 [INFO] HTTP Request: GET http://testserver/healthz "HTTP/1.1 200 OK"
PASSED                                                                   [  8%]
tests/test_api_endpoints.py::test_api_pronostics_no_data 
-------------------------------- live log call ---------------------------------
2025-12-04 20:34:53 [INFO] HTTP Request: GET http://testserver/api/pronostics?date=2025-12-04 "HTTP/1.1 200 OK"
PASSED                                                                   [  9%]
tests/test_api_endpoints.py::test_api_pronostics_with_mock_data 
-------------------------------- live log call ---------------------------------
2025-12-04 20:34:53 [INFO] HTTP Request: GET http://testserver/api/pronostics?date=2025-12-04 "HTTP/1.1 200 OK"
PASSED                                                                   [  9%]
tests/test_api_endpoints.py::test_tasks_snapshot_9h 
-------------------------------- live log call ---------------------------------
2025-12-04 20:34:53 [INFO] HTTP Request: POST http://testserver/tasks/snapshot-9h "HTTP/1.1 202 Accepted"
PASSED                                                                   [  9%]
tests/test_api_endpoints.py::test_tasks_run_phase 
-------------------------------- live log call ---------------------------------
2025-12-04 20:34:53 [INFO] HTTP Request: POST http://testserver/tasks/run-phase "HTTP/1.1 200 OK"
PASSED                                                                   [ 10%]
tests/test_api_endpoints.py::test_tasks_bootstrap_day 